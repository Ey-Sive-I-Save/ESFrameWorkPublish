# ESèµ„æºçƒ­æ›´æ–°ç³»ç»Ÿ - å•†ä¸šçº§åŠŸèƒ½åˆ†æä¸æ”¹è¿›æ–¹æ¡ˆ

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-23  
**åˆ†æå¯¹è±¡**: f:\aaProject\ESFrameWorkPublish\Assets\Plugins\ES\0_Stand\_Res\  
**å¯¹æ ‡äº§å“**: YooAssetã€Addressable System

---

## ğŸ“‹ ç›®å½•
1. [å½“å‰ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#1-å½“å‰ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
2. [æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”åˆ†æ](#2-æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”åˆ†æ)
3. [ç¼ºå¤±çš„å•†ä¸šçº§åŠŸèƒ½](#3-ç¼ºå¤±çš„å•†ä¸šçº§åŠŸèƒ½)
4. [ä¸å¿…è¦çš„åŠŸèƒ½ä¸å†—ä½™](#4-ä¸å¿…è¦çš„åŠŸèƒ½ä¸å†—ä½™)
5. [è¯¦ç»†æ”¹è¿›å»ºè®®](#5-è¯¦ç»†æ”¹è¿›å»ºè®®)
6. [ä¼˜å…ˆçº§å®æ–½è·¯çº¿å›¾](#6-ä¼˜å…ˆçº§å®æ–½è·¯çº¿å›¾)

---

## 1. å½“å‰ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### 1.1 æ ¸å¿ƒç»„ä»¶ç»“æ„
```
ESèµ„æºç³»ç»Ÿ
â”œâ”€â”€ Master (ESResMaster) - å…¨å±€èµ„æºç®¡ç†å™¨
â”‚   â”œâ”€â”€ åˆå§‹åŒ–ä¸é…ç½®
â”‚   â”œâ”€â”€ ABåŒ…ä¸»æ¸…å•ç®¡ç†
â”‚   â”œâ”€â”€ åŠ è½½ä»»åŠ¡è°ƒåº¦
â”‚   â””â”€â”€ å¯¹è±¡æ± ç®¡ç†
â”œâ”€â”€ ResUse - èµ„æºä½¿ç”¨å±‚
â”‚   â”œâ”€â”€ ESResLoader - èµ„æºåŠ è½½å™¨
â”‚   â”œâ”€â”€ ESResSource - èµ„æºæºæŠ½è±¡
â”‚   â”œâ”€â”€ ESResTable - èµ„æºç´¢å¼•è¡¨
â”‚   â””â”€â”€ ESResRefer - èµ„æºå¼•ç”¨
â””â”€â”€ SoSupport - SOé…ç½®æ”¯æŒ
    â”œâ”€â”€ ResLibrary - èµ„æºåº“é…ç½®
    â”œâ”€â”€ ResBook - èµ„æºä¹¦
    â””â”€â”€ ResPage - èµ„æºé¡µ
```

### 1.2 å½“å‰å·²å®ç°åŠŸèƒ½
âœ… **åŸºç¡€åŠŸèƒ½**
- AssetBundleæ‰“åŒ…ä¸åŠ è½½
- åŒæ­¥/å¼‚æ­¥èµ„æºåŠ è½½
- èµ„æºä¾èµ–ç®¡ç†
- åŸºç¡€çƒ­æ›´æ–°ä¸‹è½½
- å¯¹è±¡æ± å¤ç”¨æœºåˆ¶
- GUIDèµ„æºå¼•ç”¨

âœ… **ä¸­çº§åŠŸèƒ½**
- ABåŒ…ç‰ˆæœ¬å¯¹æ¯”ï¼ˆHashéªŒè¯ï¼‰
- å¤šé…ç½®ç®¡ç†ï¼ˆResLibrary/Book/Pageï¼‰
- èµ„æºåˆ†ç»„ç®¡ç†
- æœ¬åœ°/è¿œç¨‹èµ„æºåˆ‡æ¢

---

## 2. æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”åˆ†æ

### 2.1 ä¸YooAssetå¯¹æ¯”

| åŠŸèƒ½æ¨¡å— | YooAsset | ESç³»ç»Ÿ | å·®è·è¯„ä¼° |
|---------|----------|--------|---------|
| **èµ„æºåŠ è½½** | âœ… å®Œæ•´ | âœ… åŸºç¡€å®ç° | âš ï¸ ç¼ºå°‘å¥æŸ„ç®¡ç† |
| **çƒ­æ›´æ–°** | âœ… å®Œæ•´æµç¨‹ | âš ï¸ åŸºç¡€å®ç° | ğŸ”´ ç¼ºå°‘æ–­ç‚¹ç»­ä¼  |
| **ç‰ˆæœ¬ç®¡ç†** | âœ… å¤šç‰ˆæœ¬ç®¡ç† | âš ï¸ Hashå¯¹æ¯” | ğŸ”´ ç¼ºå°‘ç‰ˆæœ¬å›é€€ |
| **èµ„æºå¸è½½** | âœ… è‡ªåŠ¨å¼•ç”¨è®¡æ•° | ğŸ”´ æ‰‹åŠ¨å¸è½½ | ğŸ”´ ç¼ºå°‘GCç®¡ç† |
| **åˆ†åŒ…ç­–ç•¥** | âœ… å¤šç§ç­–ç•¥ | âš ï¸ 4ç§å‘½åæ–¹å¼ | âš ï¸ åŠŸèƒ½ç®€å• |
| **åŠ å¯†ä¿æŠ¤** | âœ… æ”¯æŒåŠ å¯† | ğŸ”´ æœªå®ç° | ğŸ”´ å®‰å…¨æ€§ä¸è¶³ |
| **CDNæ”¯æŒ** | âœ… å¤šCDNåˆ‡æ¢ | ğŸ”´ å•ä¸€URL | ğŸ”´ ç¼ºå°‘å®¹é”™ |
| **æ€§èƒ½ç›‘æ§** | âœ… å®Œæ•´ç»Ÿè®¡ | ğŸ”´ æ— ç›‘æ§ | ğŸ”´ ä¸åˆ©äºä¼˜åŒ– |

### 2.2 ä¸Addressableå¯¹æ¯”

| åŠŸèƒ½æ¨¡å— | Addressable | ESç³»ç»Ÿ | å·®è·è¯„ä¼° |
|---------|-------------|--------|---------|
| **èµ„æºå¯»å€** | âœ… å¤šç§æ–¹å¼ | âš ï¸ GUID/Path | âš ï¸ åŠŸèƒ½æœ‰é™ |
| **ä¾èµ–ç®¡ç†** | âœ… è‡ªåŠ¨ç®¡ç† | âœ… åŸºç¡€æ”¯æŒ | âš ï¸ ç¼ºå°‘å¯è§†åŒ– |
| **èµ„æºåˆ†æ** | âœ… å®Œæ•´å·¥å…· | ğŸ”´ æ— å·¥å…· | ğŸ”´ éš¾ä»¥è°ƒè¯• |
| **å†…å­˜ç®¡ç†** | âœ… è‡ªåŠ¨ä¼˜åŒ– | ğŸ”´ æ‰‹åŠ¨ç®¡ç† | ğŸ”´ æ˜“å†…å­˜æ³„æ¼ |
| **é¢„åŠ è½½** | âœ… é¢„çƒ­æœºåˆ¶ | ğŸ”´ æœªå®ç° | ğŸ”´ é¦–å¸§å¡é¡¿ |
| **åœºæ™¯ç®¡ç†** | âœ… å®Œæ•´æ”¯æŒ | ğŸ”´ æœªå®ç° | ğŸ”´ åŠŸèƒ½ç¼ºå¤± |
| **Catalogç³»ç»Ÿ** | âœ… å®Œæ•´ | ğŸ”´ ç®€å•JSON | ğŸ”´ æ‰©å±•æ€§å·® |

---

## 3. ç¼ºå¤±çš„å•†ä¸šçº§åŠŸèƒ½

### 3.1 ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆä¸¥é‡ç¼ºå¤±ï¼‰

#### 3.1.1 èµ„æºå¼•ç”¨è®¡æ•°ä¸è‡ªåŠ¨å¸è½½
**ç°çŠ¶**: åªæœ‰æ‰‹åŠ¨`UnloadRes`æ–¹æ³•ï¼Œæ— å¼•ç”¨è¿½è¸ª  
**é—®é¢˜**: 
- å®¹æ˜“é€ æˆèµ„æºæ³„æ¼
- éš¾ä»¥ç¡®å®šèµ„æºå¸è½½æ—¶æœº
- å¤šå¤„å¼•ç”¨åŒä¸€èµ„æºæ—¶å®¹æ˜“å‡ºé”™

**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESResHandle : IDisposable
{
    private IResSource _source;
    private int _refCount;
    
    public void AddRef() => _refCount++;
    public void Release() 
    {
        if (--_refCount <= 0)
        {
            _source.ReleaseTheResSource();
        }
    }
    
    public void Dispose() => Release();
}

// ä½¿ç”¨ç¤ºä¾‹
using (var handle = loader.LoadAssetHandle<Texture>("path"))
{
    // è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
}
```

#### 3.1.2 æ–­ç‚¹ç»­ä¼ ä¸ä¸‹è½½ç®¡ç†
**ç°çŠ¶**: `DownloadOneAB`ä½¿ç”¨UnityWebRequestï¼Œæ— æ–­ç‚¹ç»­ä¼   
**é—®é¢˜**:
- å¤§æ–‡ä»¶ä¸‹è½½ä¸­æ–­åéœ€è¦é‡æ–°ä¸‹è½½
- æ— ä¸‹è½½é€Ÿåº¦é™åˆ¶
- æ— å¹¶å‘ä¸‹è½½æ§åˆ¶

**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESDownloadManager
{
    // æ–­ç‚¹ç»­ä¼ æ”¯æŒ
    public class DownloadTask
    {
        public string Url;
        public string SavePath;
        public long DownloadedBytes; // å·²ä¸‹è½½å­—èŠ‚
        public long TotalBytes;
        public int RetryCount;
        public float SpeedLimit; // KB/s
    }
    
    // ä¸‹è½½é˜Ÿåˆ—ç®¡ç†
    private Queue<DownloadTask> _downloadQueue;
    private int _maxConcurrent = 3;
    
    // æ”¯æŒHTTP Rangeè¯·æ±‚
    private IEnumerator DownloadWithResume(DownloadTask task)
    {
        var request = UnityWebRequest.Get(task.Url);
        request.SetRequestHeader("Range", $"bytes={task.DownloadedBytes}-");
        // ... å®ç°
    }
}
```

#### 3.1.3 ç‰ˆæœ¬ç®¡ç†ä¸å›é€€æœºåˆ¶
**ç°çŠ¶**: åªæœ‰Hashå¯¹æ¯”ï¼Œæ— ç‰ˆæœ¬å·ç®¡ç†  
**é—®é¢˜**:
- æ— æ³•å›é€€åˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬
- ç¼ºå°‘ç°åº¦å‘å¸ƒæ”¯æŒ
- æ— ç‰ˆæœ¬å·®å¼‚è®°å½•

**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESVersionManager
{
    [Serializable]
    public class VersionInfo
    {
        public string Version; // "1.0.0"
        public int BuildNumber; // 100
        public DateTime ReleaseDate;
        public List<string> ChangedBundles; // å˜åŒ–çš„Bundleåˆ—è¡¨
        public Dictionary<string, string> BundleHashes;
        public bool IsStable; // æ˜¯å¦ç¨³å®šç‰ˆæœ¬
    }
    
    // ç‰ˆæœ¬å¯¹æ¯”
    public VersionDiff CompareVersion(VersionInfo current, VersionInfo target);
    
    // ç‰ˆæœ¬å›é€€
    public IEnumerator RollbackToVersion(string version);
    
    // å¢é‡æ›´æ–°
    public List<string> GetIncrementalBundles(VersionInfo from, VersionInfo to);
}
```

#### 3.1.4 ABåŒ…åŠ å¯†ä¸é˜²ç ´è§£
**ç°çŠ¶**: æ— ä»»ä½•åŠ å¯†æœºåˆ¶  
**é—®é¢˜**:
- èµ„æºå¯è¢«è½»æ˜“æå–
- æ— é˜²ç¯¡æ”¹éªŒè¯
- å•†ä¸šé¡¹ç›®å®‰å…¨æ€§ä¸è¶³

**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public interface IAssetBundleEncryption
{
    byte[] Encrypt(byte[] data, string key);
    byte[] Decrypt(byte[] data, string key);
    string CalculateHash(byte[] data);
}

public class AESEncryption : IAssetBundleEncryption
{
    // AES-256åŠ å¯†å®ç°
}

// åœ¨AssetBundleåŠ è½½æ—¶è§£å¯†
public class EncryptedAssetBundleLoader
{
    private IAssetBundleEncryption _encryption;
    
    public AssetBundle LoadFromFile(string path, string key)
    {
        byte[] encrypted = File.ReadAllBytes(path);
        byte[] decrypted = _encryption.Decrypt(encrypted, key);
        return AssetBundle.LoadFromMemory(decrypted);
    }
}
```

### 3.2 âš ï¸ ä¸­ä¼˜å…ˆçº§ï¼ˆé‡è¦åŠŸèƒ½ï¼‰

#### 3.2.1 èµ„æºé¢„åŠ è½½ä¸é¢„çƒ­
**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESResourcePreloader
{
    // é¢„åŠ è½½ç»„
    public class PreloadGroup
    {
        public string GroupName;
        public List<string> AssetPaths;
        public int Priority;
    }
    
    // å¼‚æ­¥é¢„åŠ è½½
    public IEnumerator PreloadGroupAsync(PreloadGroup group, 
        Action<float> onProgress = null);
    
    // Shaderé¢„çƒ­
    public void WarmupShaders(ShaderVariantCollection svc);
}
```

#### 3.2.2 CDNå¤šè·¯ç”±ä¸å®¹é”™
**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESCDNManager
{
    [Serializable]
    public class CDNConfig
    {
        public string Name;
        public string BaseUrl;
        public int Priority;
        public int Timeout; // è¶…æ—¶æ—¶é—´(ç§’)
        public bool IsBackup; // æ˜¯å¦å¤‡ç”¨CDN
    }
    
    private List<CDNConfig> _cdnList;
    
    // è‡ªåŠ¨åˆ‡æ¢CDN
    public string GetAvailableCDN()
    {
        // æŒ‰ä¼˜å…ˆçº§å°è¯•ï¼Œå¤±è´¥è‡ªåŠ¨åˆ‡æ¢
    }
    
    // CDNå¥åº·æ£€æŸ¥
    public IEnumerator CheckCDNHealth(CDNConfig cdn);
}
```

#### 3.2.3 å†…å­˜ä¸ç¼“å­˜ç®¡ç†
**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESMemoryManager
{
    // å†…å­˜é¢„ç®—
    public long MaxMemoryBudget; // å­—èŠ‚
    public long CurrentMemoryUsage;
    
    // LRUç¼“å­˜ç­–ç•¥
    private LinkedList<IResSource> _lruCache;
    
    // å†…å­˜å‹åŠ›æ£€æµ‹
    public void OnLowMemory()
    {
        // è‡ªåŠ¨å¸è½½ä¸å¸¸ç”¨èµ„æº
        UnloadLeastRecentlyUsed(0.5f); // å¸è½½50%
    }
    
    // å†…å­˜ç»Ÿè®¡
    public Dictionary<string, long> GetMemoryStatistics();
}
```

#### 3.2.4 èµ„æºå®Œæ•´æ€§æ ¡éªŒ
**æ”¹è¿›æ–¹æ¡ˆ**:
```csharp
public class ESIntegrityChecker
{
    // CRC32æ ¡éªŒ
    public bool VerifyBundleCRC(string path, uint expectedCRC);
    
    // MD5æ ¡éªŒ
    public bool VerifyBundleMD5(string path, string expectedMD5);
    
    // æ–‡ä»¶å¤§å°æ ¡éªŒ
    public bool VerifyFileSize(string path, long expectedSize);
    
    // å®Œæ•´æ€§ä¿®å¤
    public IEnumerator RepairCorruptedBundle(string bundleName);
}
```

### 3.3 ğŸ’¡ ä½ä¼˜å…ˆçº§ï¼ˆä¼˜åŒ–åŠŸèƒ½ï¼‰

#### 3.3.1 èµ„æºåˆ†æä¸å¯è§†åŒ–å·¥å…·
```csharp
// Editorå·¥å…·
public class ESResourceAnalyzer : EditorWindow
{
    // ä¾èµ–å…³ç³»å¯è§†åŒ–
    public void DrawDependencyGraph();
    
    // å†—ä½™èµ„æºæ£€æµ‹
    public List<string> FindDuplicatedAssets();
    
    // èµ„æºå¤§å°ç»Ÿè®¡
    public Dictionary<string, long> GetBundleSizeReport();
    
    // åŠ è½½æ€§èƒ½åˆ†æ
    public void ProfileLoadingPerformance();
}
```

#### 3.3.2 èµ„æºçƒ­é‡è½½ï¼ˆå¼€å‘æœŸï¼‰
```csharp
#if UNITY_EDITOR
public class ESHotReload
{
    // è¿è¡Œæ—¶èµ„æºæ›¿æ¢
    public void HotReloadAsset(string path);
    
    // ç›‘å¬èµ„æºå˜åŒ–
    private FileSystemWatcher _watcher;
    
    // è‡ªåŠ¨åˆ·æ–°
    public void EnableAutoReload(bool enable);
}
#endif
```

#### 3.3.3 æ€§èƒ½ç›‘æ§ä¸æ—¥å¿—
```csharp
public class ESPerformanceMonitor
{
    [Serializable]
    public class LoadStatistics
    {
        public string AssetName;
        public float LoadTime;
        public long MemorySize;
        public int RefCount;
        public DateTime LastAccessTime;
    }
    
    // å®æ—¶ç›‘æ§
    public void RecordLoadEvent(LoadStatistics stats);
    
    // ç”ŸæˆæŠ¥å‘Š
    public string GeneratePerformanceReport();
    
    // å¯¼å‡ºæ—¥å¿—
    public void ExportToCSV(string path);
}
```

---

## 4. ä¸å¿…è¦çš„åŠŸèƒ½ä¸å†—ä½™

### 4.1 ğŸ—‘ï¸ å»ºè®®ç§»é™¤æˆ–ç®€åŒ–

#### 4.1.1 è¿‡åº¦çš„å¯¹è±¡æ± 
**ç°çŠ¶**: `ESResMaster`ä¸­æœ‰å¤šä¸ªå¯¹è±¡æ± ï¼ˆResKey, Loader, ABSource, AssetSourceï¼‰  
**é—®é¢˜**:
- `ESResKey`çš„æ± åŒ–æ„ä¹‰ä¸å¤§ï¼ˆè½»é‡çº§ç»“æ„ä½“ï¼‰
- å¯¹è±¡æ± å¢åŠ äº†å¤æ‚åº¦ä½†æ”¶ç›Šæœ‰é™
- å†…å­˜å ç”¨å¯èƒ½æ›´é«˜

**å»ºè®®**:
```csharp
// ä¿ç•™å¿…è¦çš„æ± åŒ–
âœ… ESResLoaderæ±  - é¢‘ç¹åˆ›å»ºï¼Œå€¼å¾—æ± åŒ–
âœ… ESResSourceæ±  - é‡å¯¹è±¡ï¼Œå€¼å¾—æ± åŒ–
âŒ ESResKeyæ±  - ç§»é™¤ï¼Œç›´æ¥newå³å¯
```

#### 4.1.2 å†—ä½™çš„å‘½åæ–¹å¼æšä¸¾
**ç°çŠ¶**: `NamedOption`æœ‰4ç§é€‰é¡¹ä½†åŠŸèƒ½é‡å¤  
```csharp
public enum NamedOption
{
    UseFilePath,        // ä½¿ç”¨æ–‡ä»¶è·¯å¾„
    UseParentPath,      // ä½¿ç”¨çˆ¶æ–‡ä»¶å¤¹è·¯å¾„
    UsePageFolder,      // ä½¿ç”¨é¡µé¡¶çº§è·¯å¾„
    UsePageName,        // ä½¿ç”¨Pageå‘½å
}
```

**é—®é¢˜**:
- `UsePageFolder`å’Œ`UsePageName`åŠŸèƒ½ç›¸ä¼¼
- å®é™…åº”ç”¨ä¸­å¾ˆå°‘éœ€è¦è¿™ä¹ˆå¤šé€‰é¡¹

**å»ºè®®**:
```csharp
// ç®€åŒ–ä¸º2-3ç§æ ¸å¿ƒç­–ç•¥
public enum ABNamingStrategy
{
    ByFilePath,      // æŒ‰æ–‡ä»¶è·¯å¾„ï¼ˆæœ€å¸¸ç”¨ï¼‰
    ByDirectory,     // æŒ‰ç›®å½•
    Manual          // æ‰‹åŠ¨æŒ‡å®šï¼ˆé«˜çº§ç”¨æˆ·ï¼‰
}
```

#### 4.1.3 ä¸²è¡ŒåŠ è½½ä»»åŠ¡é“¾
**ç°çŠ¶**: `ESResMaster`ä½¿ç”¨LinkedListä¸²è¡Œæ‰§è¡Œæ‰€æœ‰åŠ è½½ä»»åŠ¡  
**é—®é¢˜**:
- æ‰€æœ‰èµ„æºä¸²è¡ŒåŠ è½½ï¼Œæ•ˆç‡ä½
- æ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸CPU
- åŠ è½½é˜Ÿåˆ—é˜»å¡ä¸¥é‡

**å»ºè®®**:
```csharp
// æ”¹ä¸ºå¹¶å‘åŠ è½½
public class ESConcurrentLoader
{
    private int _maxConcurrent = 4; // å¯é…ç½®
    private Semaphore _semaphore;
    
    public async Task LoadAsync(List<IResSource> sources)
    {
        // å¹¶å‘åŠ è½½ï¼Œæ§åˆ¶æ•°é‡
        await Task.WhenAll(
            sources.Select(s => LoadSingleAsync(s))
        );
    }
}
```

#### 4.1.4 ç¹ççš„Book/Pageç³»ç»Ÿ
**ç°çŠ¶**: ResLibrary -> ResBook -> ResPage ä¸‰å±‚ç»“æ„  
**é—®é¢˜**:
- å±‚çº§è¿‡æ·±ï¼Œé…ç½®å¤æ‚
- å¯¹äºç®€å•é¡¹ç›®æ¥è¯´è¿‡åº¦è®¾è®¡
- å­¦ä¹ æ›²çº¿é™¡å³­

**å»ºè®®**:
```csharp
// æä¾›ç®€åŒ–ç‰ˆæœ¬
public class ESSimpleResourceConfig : ScriptableObject
{
    [Serializable]
    public class ResourceGroup
    {
        public string GroupName;
        public List<UnityEngine.Object> Assets;
        public bool IsRemote;
    }
    
    public List<ResourceGroup> Groups;
}

// é«˜çº§ç”¨æˆ·ä»å¯ä½¿ç”¨å®Œæ•´çš„Book/Pageç³»ç»Ÿ
```

### 4.2 ğŸ“ éœ€è¦ä¼˜åŒ–çš„éƒ¨åˆ†

#### 4.2.1 ç¡¬ç¼–ç çš„è·¯å¾„å­—ç¬¦ä¸²
**ç°çŠ¶**: ä»£ç ä¸­å¤§é‡ç¡¬ç¼–ç è·¯å¾„
```csharp
string netJson = netpath + "/" + PathParentFolder_ESResJsonData;
```

**å»ºè®®**:
```csharp
// ä½¿ç”¨é…ç½®ç±»ç»Ÿä¸€ç®¡ç†
public class ESPathConfig
{
    public static readonly string JsonDataFolder = "ESResJsonData";
    public static readonly string DependenciesFile = "ESDependences.json";
    // ... å…¶ä»–è·¯å¾„
}
```

#### 4.2.2 ç¼ºå°‘é”™è¯¯å¤„ç†
**ç°çŠ¶**: å¾ˆå¤šæ–¹æ³•æ²¡æœ‰try-catchæˆ–è¿”å›å€¼æ£€æŸ¥  
**å»ºè®®**: æ·»åŠ å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—ç³»ç»Ÿ

---

## 5. è¯¦ç»†æ”¹è¿›å»ºè®®

### 5.1 æ¶æ„å±‚é¢

#### 5.1.1 å¼•å…¥æ¨¡å—åŒ–è®¾è®¡
```
ESèµ„æºç³»ç»Ÿ v2.0
â”œâ”€â”€ Core (æ ¸å¿ƒå±‚)
â”‚   â”œâ”€â”€ ESResourceManager - ç»Ÿä¸€èµ„æºç®¡ç†æ¥å£
â”‚   â”œâ”€â”€ ESBundleSystem - ABåŒ…ç³»ç»Ÿ
â”‚   â””â”€â”€ ESAddressSystem - å¯»å€ç³»ç»Ÿ
â”œâ”€â”€ Loading (åŠ è½½å±‚)
â”‚   â”œâ”€â”€ ESLoaderPool - åŠ è½½å™¨æ± 
â”‚   â”œâ”€â”€ ESConcurrentLoader - å¹¶å‘åŠ è½½
â”‚   â””â”€â”€ ESPreloader - é¢„åŠ è½½
â”œâ”€â”€ Memory (å†…å­˜å±‚)
â”‚   â”œâ”€â”€ ESRefCounter - å¼•ç”¨è®¡æ•°
â”‚   â”œâ”€â”€ ESMemoryManager - å†…å­˜ç®¡ç†
â”‚   â””â”€â”€ ESCachePolicy - ç¼“å­˜ç­–ç•¥
â”œâ”€â”€ Download (ä¸‹è½½å±‚)
â”‚   â”œâ”€â”€ ESDownloader - ä¸‹è½½å™¨
â”‚   â”œâ”€â”€ ESVersionControl - ç‰ˆæœ¬æ§åˆ¶
â”‚   â””â”€â”€ ESCDNManager - CDNç®¡ç†
â””â”€â”€ Security (å®‰å…¨å±‚)
    â”œâ”€â”€ ESEncryption - åŠ å¯†
    â”œâ”€â”€ ESIntegrity - å®Œæ•´æ€§æ ¡éªŒ
    â””â”€â”€ ESAntiCheat - é˜²ä½œå¼Š
```

#### 5.1.2 æ¥å£æŠ½è±¡åŒ–
```csharp
// èµ„æºåŠ è½½æ¥å£
public interface IResourceLoader
{
    Task<T> LoadAsync<T>(string address) where T : UnityEngine.Object;
    T LoadSync<T>(string address) where T : UnityEngine.Object;
    void Release(string address);
}

// ä¸‹è½½æ¥å£
public interface IDownloader
{
    Task<bool> DownloadAsync(string url, string savePath, 
        IProgress<float> progress = null);
    void CancelDownload(string url);
}

// ç‰ˆæœ¬æ§åˆ¶æ¥å£
public interface IVersionControl
{
    Task<VersionInfo> GetLatestVersion();
    Task<bool> UpdateToVersion(string version);
    Task<bool> RollbackToVersion(string version);
}
```

### 5.2 æ€§èƒ½ä¼˜åŒ–

#### 5.2.1 å¼‚æ­¥åŠ è½½ä¼˜åŒ–
```csharp
// ä½¿ç”¨async/awaitæ›¿ä»£åç¨‹
public class ESAsyncLoader
{
    public async Task<T> LoadAssetAsync<T>(string path) 
        where T : UnityEngine.Object
    {
        // ä½¿ç”¨Task-basedå¼‚æ­¥
        var request = AssetBundle.LoadAssetAsync<T>(path);
        while (!request.isDone)
        {
            await Task.Yield();
        }
        return request.asset as T;
    }
}
```

#### 5.2.2 å†…å­˜æ± ä¼˜åŒ–
```csharp
// ä½¿ç”¨System.Buffers.ArrayPool
public class ESBufferPool
{
    private static ArrayPool<byte> _pool = 
        ArrayPool<byte>.Create();
    
    public byte[] Rent(int size) => _pool.Rent(size);
    public void Return(byte[] buffer) => _pool.Return(buffer);
}
```

### 5.3 æ˜“ç”¨æ€§æå‡

#### 5.3.1 é“¾å¼APIè®¾è®¡
```csharp
// æµç•…çš„APIè®¾è®¡
ESResource.Load<Texture>("ui/icon")
    .WithTimeout(5.0f)
    .WithRetry(3)
    .OnProgress(p => Debug.Log(p))
    .OnComplete(tex => /* use texture */)
    .OnError(err => Debug.LogError(err))
    .Start();
```

#### 5.3.2 ç‰¹æ€§æ ‡è®°
```csharp
// ä½¿ç”¨Attributeç®€åŒ–é…ç½®
[ESResourceGroup("UI")]
[ESBundleName("ui_common")]
public class UIAtlas : ScriptableObject
{
    [ESAssetAddress("icon/player")]
    public Sprite PlayerIcon;
}
```

---

## 6. ä¼˜å…ˆçº§å®æ–½è·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒç¨³å®šæ€§ï¼ˆ1-2å‘¨ï¼‰ğŸ”´
1. âœ… å®ç°èµ„æºå¼•ç”¨è®¡æ•°ç³»ç»Ÿ
2. âœ… æ·»åŠ å®Œæ•´é”™è¯¯å¤„ç†
3. âœ… å®ç°æ–­ç‚¹ç»­ä¼ ä¸‹è½½
4. âœ… æ·»åŠ ç‰ˆæœ¬ç®¡ç†åŸºç¡€æ¡†æ¶
5. âœ… ç§»é™¤ä¸å¿…è¦çš„å¯¹è±¡æ± 

**é¢„æœŸæ•ˆæœ**: ç³»ç»Ÿç¨³å®šæ€§æå‡50%ï¼Œå‡å°‘å´©æºƒå’Œå†…å­˜æ³„æ¼

### Phase 2: å®‰å…¨ä¸æ€§èƒ½ï¼ˆ2-3å‘¨ï¼‰âš ï¸
1. âœ… å®ç°ABåŒ…åŠ å¯†æœºåˆ¶
2. âœ… æ·»åŠ å®Œæ•´æ€§æ ¡éªŒ
3. âœ… ä¼˜åŒ–ä¸ºå¹¶å‘åŠ è½½
4. âœ… å®ç°å†…å­˜ç®¡ç†å™¨
5. âœ… æ·»åŠ æ€§èƒ½ç›‘æ§

**é¢„æœŸæ•ˆæœ**: åŠ è½½é€Ÿåº¦æå‡30%ï¼Œå†…å­˜å ç”¨é™ä½20%

### Phase 3: åŠŸèƒ½å®Œå–„ï¼ˆ3-4å‘¨ï¼‰ğŸ’¡
1. âœ… å®ç°CDNå¤šè·¯ç”±
2. âœ… æ·»åŠ é¢„åŠ è½½ç³»ç»Ÿ
3. âœ… å®Œå–„ç‰ˆæœ¬å›é€€
4. âœ… å¼€å‘åˆ†æå·¥å…·
5. âœ… ä¼˜åŒ–é…ç½®ç³»ç»Ÿ

**é¢„æœŸæ•ˆæœ**: è¾¾åˆ°å•†ä¸šçº§æ ‡å‡†ï¼ŒåŠŸèƒ½å®Œæ•´åº¦90%

### Phase 4: ç”Ÿæ€å»ºè®¾ï¼ˆæŒç»­ï¼‰ğŸŒŸ
1. âœ… ç¼–å†™è¯¦ç»†æ–‡æ¡£
2. âœ… æä¾›ç¤ºä¾‹é¡¹ç›®
3. âœ… å¼€å‘ç¼–è¾‘å™¨æ’ä»¶
4. âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•
5. âœ… ç¤¾åŒºåé¦ˆè¿­ä»£

---

## 7. æ€»ç»“ä¸å»ºè®®

### 7.1 æ ¸å¿ƒä¼˜åŠ¿
âœ… **å·²æœ‰è‰¯å¥½åŸºç¡€**
- åŸºç¡€æ¶æ„æ¸…æ™°
- SOé…ç½®çµæ´»
- æ”¯æŒçƒ­æ›´æ–°
- æœ‰å¯¹è±¡æ± ä¼˜åŒ–

### 7.2 ä¸»è¦å·®è·
ğŸ”´ **æ€¥éœ€è¡¥å……**
1. å¼•ç”¨è®¡æ•°ä¸è‡ªåŠ¨å¸è½½ - **æœ€é‡è¦**
2. æ–­ç‚¹ç»­ä¼ ä¸ä¸‹è½½ç®¡ç† - **ç”¨æˆ·ä½“éªŒå…³é”®**
3. ç‰ˆæœ¬ç®¡ç†ä¸å›é€€ - **å•†ä¸šå¿…éœ€**
4. ABåŒ…åŠ å¯† - **å®‰å…¨æ€§ä¿éšœ**
5. æ€§èƒ½ç›‘æ§ - **è¿ç»´å¿…å¤‡**

### 7.3 å®æ–½å»ºè®®
1. **å…ˆä¿è¯ç¨³å®šæ€§**: Phase 1ä¼˜å…ˆï¼Œè§£å†³æ ¸å¿ƒé—®é¢˜
2. **å†æå‡æ€§èƒ½**: Phase 2è·Ÿè¿›ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
3. **æœ€åå®Œå–„åŠŸèƒ½**: Phase 3-4é€æ­¥è¿­ä»£
4. **æŒç»­é‡æ„**: æ¯ä¸ªPhaseå®Œæˆåè¿›è¡Œä»£ç reviewå’Œé‡æ„

### 7.4 é£é™©æç¤º
âš ï¸ **æ³¨æ„äº‹é¡¹**:
- å¤§è§„æ¨¡é‡æ„å¯èƒ½å½±å“ç°æœ‰é¡¹ç›®ï¼Œå»ºè®®åˆ›å»ºv2.0åˆ†æ”¯
- éƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚åŠ å¯†ï¼‰å¯èƒ½å½±å“åŠ è½½æ€§èƒ½ï¼Œéœ€è¦æƒè¡¡
- è¿‡åº¦ä¼˜åŒ–å¯èƒ½å¢åŠ å¤æ‚åº¦ï¼Œä¿æŒsimple firståŸåˆ™
- å‘åå…¼å®¹æ€§å¾ˆé‡è¦ï¼Œæä¾›è¿ç§»å·¥å…·

---

## é™„å½•ï¼šå‚è€ƒèµ„æº

### å¼€æºé¡¹ç›®å‚è€ƒ
- **YooAsset**: https://github.com/tuyoogame/YooAsset
- **xasset**: https://github.com/xasset/xasset
- **HybridCLR**: https://github.com/focus-creative-games/hybridclr

### å®˜æ–¹æ–‡æ¡£
- Unity AssetBundle: https://docs.unity3d.com/Manual/AssetBundlesIntro.html
- Addressables: https://docs.unity3d.com/Packages/com.unity.addressables@latest

### ç›¸å…³æ–‡ç« 
- [AssetBundleæœ€ä½³å®è·µ](https://unity.com/how-to/assetbundle-best-practices)
- [ç§»åŠ¨æ¸¸æˆèµ„æºç®¡ç†æ–¹æ¡ˆ](https://zhuanlan.zhihu.com/p/xxxxx)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤è€…**: ES Framework Team  
**æœ€åæ›´æ–°**: 2026-01-23
