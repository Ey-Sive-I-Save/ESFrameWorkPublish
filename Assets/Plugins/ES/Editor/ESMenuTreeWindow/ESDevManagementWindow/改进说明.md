# ESå¼€å‘ç®¡ç†çª—å£ - æ”¹è¿›è¯´æ˜

## ğŸ“‹ æ”¹è¿›æ¦‚è§ˆ

æ ¹æ®åŸå§‹ä»£ç çš„8ä¸ªé—®é¢˜ï¼Œæœ¬æ¬¡æ”¹è¿›åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

---

## âœ… å·²è§£å†³çš„é—®é¢˜

### 1. âŒ ä½¿ç”¨ tree.Add â†’ âœ… ä½¿ç”¨ QuickBuildRootMenu
**é—®é¢˜**: åŸä»£ç ç›´æ¥ä½¿ç”¨ `tree.Add("ğŸ¯ å¼€å‘è®¡åˆ’/è®¡åˆ’åˆ—è¡¨", pageDevPlan)`

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// æ”¹è¿›å‰
tree.Add("ğŸ¯ å¼€å‘è®¡åˆ’/è®¡åˆ’åˆ—è¡¨", pageDevPlan);

// æ”¹è¿›å
QuickBuildRootMenu(tree, PageName_TaskList, ref pageTask, SdfIconType.ListCheck);
```
- ä½¿ç”¨åŸºç±»æä¾›çš„ `QuickBuildRootMenu` æ–¹æ³•
- ç»Ÿä¸€ä½¿ç”¨ SdfIconType å›¾æ ‡
- èœå•é¡¹è‡ªåŠ¨æ³¨å†Œåˆ° MenuItems å­—å…¸

---

### 2. âŒ ç¼ºå°‘æ—¥å¿—æè¿° â†’ âœ… æ·»åŠ è¯¦ç»†æè¿°å­—æ®µ
**é—®é¢˜**: æ—¥å¿—æ¡ç›®ç¼ºå°‘è‰¯å¥½çš„æè¿°å’Œå˜æ›´è®°å½•

**è§£å†³æ–¹æ¡ˆ**:
```csharp
public class DevLogEntry
{
    // æ–°å¢å­—æ®µ
    public string changeDescription;  // å˜æ›´æè¿°
    public string createdBy;          // åˆ›å»ºäºº
    public string lastModifiedBy;     // æœ€åä¿®æ”¹äºº
    public int version;               // ç‰ˆæœ¬å·
    
    // æ–°å¢æ–¹æ³•
    public void UpdateModified(string modifiedBy) 
    {
        lastModified = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");
        lastModifiedBy = modifiedBy;
        version++;
    }
}
```

---

### 3. âŒ æ— å¤šäººåä½œå†²çªå¤„ç† â†’ âœ… ç‰ˆæœ¬æ§åˆ¶æœºåˆ¶
**é—®é¢˜**: æ²¡æœ‰è€ƒè™‘å¤šäººåä½œæ—¶çš„æ•°æ®å†²çª

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// DevManagementData ç±»æ–°å¢
public string lastModifiedBy = "";
public string lastModifiedTime = "";
public int dataVersion = 1;

public bool CheckConflict(int expectedVersion)
{
    return dataVersion != expectedVersion;
}

public void IncrementVersion()
{
    dataVersion++;
}

// æ¯ä¸ªæ¡ç›®ä¹Ÿæœ‰ç‹¬ç«‹ç‰ˆæœ¬å·
DevLogEntry.version
TaskEntry.version
```

**ä½¿ç”¨æ–¹å¼**:
- æ¯æ¬¡ä¿å­˜æ—¶è®°å½•ä¿®æ”¹äººå’Œæ—¶é—´
- æ•°æ®æ–‡ä»¶çº§åˆ«ç‰ˆæœ¬æ§åˆ¶
- æ¯ä¸ªæ¡ç›®ç‹¬ç«‹ç‰ˆæœ¬å·è¿½è¸ª
- å¯æ‰©å±•ä¸ºæ£€æµ‹å†²çªå¹¶æç¤ºç”¨æˆ·

---

### 4. âŒ UIå®¹æ˜“è¶…å‡ºçª—å£ç•Œé™ â†’ âœ… è‡ªé€‚åº”å¸ƒå±€
**é—®é¢˜**: ä½¿ç”¨å›ºå®šå®½åº¦çš„ HorizontalGroup å¯¼è‡´å†…å®¹æº¢å‡º

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// æ”¹è¿›å‰ - å›ºå®š 4 åˆ—å¸ƒå±€
[HorizontalGroup("ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ/Row1")]
[BoxGroup("ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ/Row1/Col1")]
[BoxGroup("ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ/Row1/Col2")]
[BoxGroup("ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ/Row1/Col3")]
[BoxGroup("ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ/Row1/Col4")]

// æ”¹è¿›å - å‚ç›´å¸ƒå±€ + è‡ªé€‚åº”
[FoldoutGroup("æ•°æ®ç»Ÿè®¡", Expanded = true)]
[ShowInInspector, ReadOnly, LabelText("æ€»æ—¥å¿—æ•°")]
private int TotalLogs => data?.devLogs?.Count ?? 0;

// TableList æ”¯æŒåˆ†é¡µ
[TableList(ShowIndexLabels = true, AlwaysExpanded = true, 
           NumberOfItemsPerPage = 20, ShowPaging = true)]
```

**æ”¹è¿›ç‚¹**:
- ç§»é™¤å›ºå®šåˆ—æ•°çš„ HorizontalGroup
- ä½¿ç”¨ FoldoutGroup æ”¯æŒæŠ˜å 
- TableList æ·»åŠ åˆ†é¡µåŠŸèƒ½
- çª—å£æœ€å°å°ºå¯¸è°ƒæ•´ä¸º 1000x650

---

### 5. âŒ åˆ†ç±»è¿‡å¤š â†’ âœ… ç²¾ç®€ä¸º 3 å¤§ç±»
**é—®é¢˜**: 4å¤§ç±»åˆ†ç±»è¿‡äºç¹çï¼ˆæ—¥å¿—ã€è®¡åˆ’ã€æ’æœŸã€ç›®æ ‡ï¼‰

**è§£å†³æ–¹æ¡ˆ**:

**æ”¹è¿›å‰ (4å¤§ç±»)**:
```
ğŸ“Š ä»ªè¡¨æ¿
ğŸ“ å¼€å‘æ—¥å¿—
  â”œâ”€ æ—¥å¿—åˆ—è¡¨
  â””â”€ æ–°å»ºæ—¥å¿—
ğŸ¯ å¼€å‘è®¡åˆ’
  â”œâ”€ è®¡åˆ’åˆ—è¡¨
  â””â”€ æ–°å»ºè®¡åˆ’
ğŸ“… æ’æœŸç®¡ç†
  â”œâ”€ æ’æœŸæ—¥å†
  â””â”€ æ–°å»ºæ’æœŸ
ğŸ–ï¸ ç›®æ ‡ç®¡ç†
  â”œâ”€ ç›®æ ‡åˆ—è¡¨
  â””â”€ æ–°å»ºç›®æ ‡
ğŸ“ˆ ç»Ÿè®¡åˆ†æ
âš™ï¸ è®¾ç½®
```

**æ”¹è¿›å (3å¤§ç±»)**:
```
ğŸ“Š ä»ªè¡¨æ¿ (åˆå¹¶ç»Ÿè®¡+ç›®æ ‡)
  â”œâ”€ æ•°æ®ç»Ÿè®¡
  â”œâ”€ ä»»åŠ¡å®Œæˆç‡
  â””â”€ æœ€è¿‘æ´»åŠ¨

ğŸ“ å¼€å‘æ—¥å¿—
  â”œâ”€ æ—¥å¿—åˆ—è¡¨ (æ”¯æŒç­›é€‰+æœç´¢)
  â””â”€ æ–°å»ºæ—¥å¿—

âœ… ä»»åŠ¡ç®¡ç† (åˆå¹¶è®¡åˆ’+æ’æœŸ)
  â”œâ”€ ä»»åŠ¡åˆ—è¡¨ (æ”¯æŒç­›é€‰+æœç´¢)
  â””â”€ æ–°å»ºä»»åŠ¡

âš™ï¸ è®¾ç½®
  â”œâ”€ ç”¨æˆ·ä¿¡æ¯
  â”œâ”€ æ•°æ®ç®¡ç†
  â””â”€ å±é™©æ“ä½œ
```

**åˆå¹¶é€»è¾‘**:
- **å¼€å‘è®¡åˆ’ + æ’æœŸç®¡ç†** â†’ **ä»»åŠ¡ç®¡ç†**
  - ç»Ÿä¸€çš„ TaskEntry æ•°æ®ç»“æ„
  - åŒ…å«å¼€å§‹/æˆªæ­¢æ—¥æœŸ
  - åŒ…å«è´Ÿè´£äººã€è¿›åº¦ã€ä¼˜å…ˆçº§
  
- **ç›®æ ‡ç®¡ç† + ç»Ÿè®¡åˆ†æ** â†’ **ä»ªè¡¨æ¿**
  - é›†ä¸­å±•ç¤ºæ‰€æœ‰ç»Ÿè®¡æ•°æ®
  - æ˜¾ç¤ºä»»åŠ¡å®Œæˆç‡
  - å±•ç¤ºæœ€è¿‘æ´»åŠ¨

---

### 6. âŒ ç»˜åˆ¶ä¸ç¾è§‚ â†’ âœ… ç»Ÿä¸€è§†è§‰é£æ ¼
**é—®é¢˜**: é¢œè‰²ã€å¸ƒå±€ã€é—´è·ä¸ç»Ÿä¸€

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// ç»Ÿä¸€é¢œè‰²æ–¹æ¡ˆ
[GUIColor(0.3f, 0.9f, 0.3f)]  // ç»¿è‰² - åˆ›å»º/æˆåŠŸ
[GUIColor(0.9f, 0.3f, 0.3f)]  // çº¢è‰² - åˆ é™¤/å±é™©
[GUIColor(0.4f, 0.7f, 0.9f)]  // è“è‰² - åˆ·æ–°/ä¿¡æ¯
[GUIColor(0.7f, 0.7f, 0.7f)]  // ç°è‰² - æ¸…ç©º/é‡ç½®

// ç»Ÿä¸€é—´è·
[PropertySpace(10)]  // å¤§é—´è·
[PropertySpace(5)]   // å°é—´è·

// ç»Ÿä¸€æŒ‰é’®é«˜åº¦
ButtonHeight = 45    // ä¸»è¦æ“ä½œ
ButtonHeight = 35    // æ¬¡è¦æ“ä½œ
ButtonHeight = 30    // è¾…åŠ©æ“ä½œ

// è¿›åº¦æ¡é¢œè‰²åŠ¨æ€è°ƒæ•´
private Color GetProgressColor(int value)
{
    if (value >= 80) return new Color(0.3f, 0.9f, 0.3f);  // ç»¿è‰²
    if (value >= 50) return new Color(0.9f, 0.7f, 0.3f);  // æ©™è‰²
    return new Color(0.9f, 0.3f, 0.3f);                    // çº¢è‰²
}
```

---

### 7. âŒ æ— é»‘è‰²èƒŒæ™¯ â†’ âœ… åŸºç±»è‡ªåŠ¨åº”ç”¨
**é—®é¢˜**: æ²¡æœ‰åƒ SoDataWindow é‚£æ ·çš„é»‘è‰²èƒŒæ™¯

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// ESMenuTreeWindowAB åŸºç±»å·²å®ç°
protected override void OnImGUI()
{
    if (UsingWindow == null)
    {
        UsingWindow = this as T;
    }
    GUI.DrawTexture(new Rect(0, 0, position.width, position.height), blackTexture);
    base.OnImGUI();
}
```
âœ… **æ— éœ€ä¿®æ”¹** - åŸºç±»å·²è‡ªåŠ¨åº”ç”¨é»‘è‰²èƒŒæ™¯

---

### 8. âŒ Emojiæ— ç”¨ â†’ âœ… ä½¿ç”¨ SDF å›¾æ ‡
**é—®é¢˜**: æ·»åŠ äº† Emoji ä½†å®é™…æ²¡ä»€ä¹ˆç”¨

**è§£å†³æ–¹æ¡ˆ**:
```csharp
// æ”¹è¿›å‰
tree.Add("ğŸ“Š ä»ªè¡¨æ¿", pageDashboard);
tree.Add("ğŸ“ å¼€å‘æ—¥å¿—/æ—¥å¿—åˆ—è¡¨", pageDevLog);
tree.Add("ğŸ¯ å¼€å‘è®¡åˆ’/è®¡åˆ’åˆ—è¡¨", pageDevPlan);

// æ”¹è¿›å
QuickBuildRootMenu(tree, PageName_Dashboard, ref pageDashboard, 
                   SdfIconType.Speedometer2);
QuickBuildRootMenu(tree, PageName_DevLogList, ref pageDevLog, 
                   SdfIconType.JournalText);
QuickBuildRootMenu(tree, PageName_TaskList, ref pageTask, 
                   SdfIconType.ListCheck);
```

**SDF å›¾æ ‡æ˜ å°„**:
| åŠŸèƒ½ | Emoji | SDF Icon |
|-----|-------|----------|
| ä»ªè¡¨æ¿ | ğŸ“Š | `SdfIconType.Speedometer2` |
| æ—¥å¿— | ğŸ“ | `SdfIconType.JournalText` |
| æ–°å»ºæ—¥å¿— | â• | `SdfIconType.JournalPlus` |
| ä»»åŠ¡ | âœ… | `SdfIconType.ListCheck` |
| æ–°å»ºä»»åŠ¡ | â• | `SdfIconType.PlusSquare` |
| è®¾ç½® | âš™ï¸ | `SdfIconType.GearFill` |

---

## ğŸ†• é¢å¤–æ”¹è¿›

### 1. æœç´¢å’Œç­›é€‰åŠŸèƒ½
```csharp
// æ—¥å¿—åˆ—è¡¨æ”¯æŒç±»å‹ç­›é€‰å’Œå…³é”®è¯æœç´¢
[LabelText("ç­›é€‰ç±»å‹"), OnValueChanged("RefreshView")]
public string filterType = "å…¨éƒ¨";

[LabelText("æœç´¢"), OnValueChanged("RefreshView")]
public string searchText = "";

public List<DevLogEntry> FilteredLogs
{
    get
    {
        var filtered = data.devLogs.AsEnumerable();
        
        if (filterType != "å…¨éƒ¨")
            filtered = filtered.Where(l => l.type == type);
        
        if (!string.IsNullOrWhiteSpace(searchText))
            filtered = filtered.Where(l => 
                l.title.Contains(searchText) || 
                l.content.Contains(searchText));
        
        return filtered.ToList();
    }
}
```

### 2. è¡¨å•éªŒè¯
```csharp
[LabelText("æ ‡é¢˜"), Required]  // å¿…å¡«å­—æ®µ
public string newTitle = "";

// åˆ›å»ºæ—¶éªŒè¯
if (string.IsNullOrWhiteSpace(newTitle))
{
    EditorUtility.DisplayDialog("é”™è¯¯", "æ ‡é¢˜ä¸èƒ½ä¸ºç©ºï¼", "ç¡®å®š");
    return;
}
```

### 3. æ¸…ç©ºè¡¨å•åŠŸèƒ½
```csharp
[Button("æ¸…ç©ºè¡¨å•", ButtonHeight = 30), GUIColor(0.7f, 0.7f, 0.7f)]
public void ClearForm()
{
    newTitle = "";
    newContent = "";
    newTags.Clear();
}
```

### 4. ç”¨æˆ·é…ç½®æŒä¹…åŒ–
```csharp
// ä¿å­˜å½“å‰ç”¨æˆ·åˆ° EditorPrefs
private const string CurrentUserKey = "ESDevManagement_CurrentUser";
private string currentUser = Environment.UserName;

EditorPrefs.SetString(CurrentUserKey, currentUser);
```

---

## ğŸ“Š æ•°æ®ç»“æ„å¯¹æ¯”

### æ”¹è¿›å‰
```
DevLogEntry (æ—¥å¿—)
DevPlanEntry (è®¡åˆ’)
ScheduleEntry (æ’æœŸ)
GoalEntry (ç›®æ ‡)
```

### æ”¹è¿›å
```
DevLogEntry (æ—¥å¿—) - å¢å¼ºç‰ˆ
  + changeDescription (å˜æ›´æè¿°)
  + createdBy (åˆ›å»ºäºº)
  + lastModifiedBy (ä¿®æ”¹äºº)
  + version (ç‰ˆæœ¬å·)

TaskEntry (ä»»åŠ¡) - åˆå¹¶è®¡åˆ’+æ’æœŸ
  + åŒ…å«æ—¥æœŸèŒƒå›´
  + åŒ…å«è´Ÿè´£äºº
  + åŒ…å«è¿›åº¦è¿½è¸ª
  + version (ç‰ˆæœ¬å·)
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ›¿æ¢æ–‡ä»¶
```
ESDevManagementWindow.cs â†’ ESDevManagementWindow_Improved.cs
DevManagementData.cs â†’ DevManagementData_Improved.cs
```

### 2. æ›´æ–°å¼•ç”¨
ç”±äºæ•°æ®ç»“æ„å˜åŒ–ï¼Œéœ€è¦ï¼š
1. åˆ é™¤æ—§çš„ `DevManagementData.asset`
2. é‡æ–°æ‰“å¼€çª—å£è‡ªåŠ¨åˆ›å»ºæ–°æ•°æ®æ–‡ä»¶
3. æˆ–æ‰‹åŠ¨åˆ›å»ºï¼š`Assets -> Create -> ES -> å¼€å‘ç®¡ç†æ•°æ®`

### 3. è¿ç§»æ—§æ•°æ® (å¯é€‰)
å¦‚æœéœ€è¦ä¿ç•™æ—§æ•°æ®ï¼Œå¯ä»¥ç¼–å†™è¿ç§»è„šæœ¬ï¼š
```csharp
// å°† DevPlanEntry å’Œ ScheduleEntry åˆå¹¶ä¸º TaskEntry
var task = new TaskEntry
{
    taskName = plan.planName,
    description = plan.description,
    startDate = plan.startDate,
    dueDate = plan.endDate,
    progress = plan.progress,
    // ...
};
```

---

## ğŸ¨ è§†è§‰æ•ˆæœæ”¹è¿›

### èœå•æ ‘
- âœ… å›¾æ ‡ç»Ÿä¸€ä½¿ç”¨ SDF Icons
- âœ… ç§»é™¤æ‰€æœ‰ Emoji
- âœ… èœå•é«˜åº¦: 28px
- âœ… å›¾æ ‡å¤§å°: 20px

### é¢œè‰²æ–¹æ¡ˆ
- ğŸŸ¢ ç»¿è‰² (0.3, 0.9, 0.3) - åˆ›å»º/æˆåŠŸ/é«˜è¿›åº¦
- ğŸ”´ çº¢è‰² (0.9, 0.3, 0.3) - åˆ é™¤/å±é™©/ä½è¿›åº¦
- ğŸ”µ è“è‰² (0.4, 0.7, 0.9) - ä¿¡æ¯/åˆ·æ–°
- ğŸŸ  æ©™è‰² (0.9, 0.7, 0.3) - è­¦å‘Š/ä¸­ç­‰è¿›åº¦
- âšª ç°è‰² (0.7, 0.7, 0.7) - ä¸­æ€§æ“ä½œ

### å¸ƒå±€
- âœ… å“åº”å¼å¸ƒå±€
- âœ… FoldoutGroup æ”¯æŒæŠ˜å 
- âœ… TableList æ”¯æŒåˆ†é¡µ (20æ¡/é¡µ)
- âœ… æœ€å°çª—å£å°ºå¯¸: 1000x650

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å…¼å®¹æ€§**: æ–°æ—§æ•°æ®ç»“æ„ä¸å…¼å®¹ï¼Œéœ€è¦è¿ç§»
2. **EditorPrefs**: ä½¿ç”¨äº† EditorPrefs ä¿å­˜ç”¨æˆ·é…ç½®
3. **ç‰ˆæœ¬æ§åˆ¶**: å»ºè®®å°†æ•°æ®æ–‡ä»¶åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
4. **å¤šäººåä½œ**: éœ€è¦å›¢é˜Ÿçº¦å®šæ•°æ®æ–‡ä»¶çš„åˆå¹¶ç­–ç•¥

---

## ğŸ“ åç»­ä¼˜åŒ–å»ºè®®

1. **é«˜çº§å†²çªæ£€æµ‹**
   - å®ç° Git ç±»ä¼¼çš„ä¸‰æ–¹åˆå¹¶
   - æ˜¾ç¤ºå†²çªå·®å¼‚å¯¹æ¯”ç•Œé¢

2. **æ›´å¼ºå¤§çš„æœç´¢**
   - æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
   - æ”¯æŒæ—¥æœŸèŒƒå›´ç­›é€‰
   - æ”¯æŒå¤šæ¡ä»¶ç»„åˆ

3. **æ•°æ®å¯¼å‡º**
   - å¯¼å‡ºä¸º Markdown
   - å¯¼å‡ºä¸º Excel/CSV
   - ç”Ÿæˆå‘¨æŠ¥/æœˆæŠ¥

4. **ä»»åŠ¡çœ‹æ¿è§†å›¾**
   - çœ‹æ¿è§†å›¾ (Kanban)
   - ç”˜ç‰¹å›¾ (Gantt Chart)
   - æ—¶é—´çº¿è§†å›¾

5. **æé†’é€šçŸ¥**
   - ä»»åŠ¡åˆ°æœŸæé†’
   - ç¼–è¾‘å™¨å¯åŠ¨æ—¶æ˜¾ç¤ºä»Šæ—¥ä»»åŠ¡

---

## ğŸ“š å‚è€ƒä»£ç ä½ç½®

- **åŸºç±»**: `Assets/Plugins/ES/Editor/ESMenuTreeWindow/-ESMenuTreeWindow.cs`
- **å‚è€ƒå®ç°**: `Assets/Plugins/ES/Editor/ESMenuTreeWindow/SODataInfoWindow/ESSODataInfoWindow.cs`
- **æ”¹è¿›æ–‡ä»¶**: 
  - `ESDevManagementWindow_Improved.cs`
  - `DevManagementData_Improved.cs`

---

**ä½œè€…**: GitHub Copilot  
**æ—¥æœŸ**: 2026-01-15  
**ç‰ˆæœ¬**: v2.0 - ç²¾ç®€é‡æ„ç‰ˆ
